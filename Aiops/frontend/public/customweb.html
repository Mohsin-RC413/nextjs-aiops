<!doctype html>
<html lang="en">
  <head>
    <title>RC Enterprise AI Ops</title>
    <style>
      html, body {
        height: 100%;
        width: 100%;
        margin: 0;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: #ffffff;
      }

      #banner {
        display: flex;
        align-items: center;
        justify-content: space-between;
        background-color: #333;
        color: #fff;
        height: 60px;
        padding: 0 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      #banner img {
        height: 40px;
      }

      #banner nav {
        display: flex;
        gap: 20px;
      }

      #banner nav a {
        color: #fff;
        text-decoration: none;
        font-size: 16px;
      }

      #banner nav a:hover {
        text-decoration: underline;
      }

      #webchat {
        width: 70%;
        margin: 25px auto;
        border-radius: 10px;
        background-color: aliceblue;
        position: fixed;
        top: 150px;
        bottom: 0;
        left: 0;
        right: 0;
        padding: 20px;
        box-sizing: border-box;
      }
      #webchat div:nth-of-type(3) {
        background-color: #ffffff;
      }
      .webchat__icon-button__shade {
        background-color: #ffffff !important;
      }
      #webchat div:nth-of-type(1) {
        
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-size: 12px !important;
        background-color: aliceblue;
      }
      .webchat__text-content{
        border: none !important;
      }
      .react-film__flipper__body{
        color: #000000 !important;

      }
      .cta-button {
        background-color: #0078d4;
        color: #fff;
        border: none;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        border-radius: 5px;
      }

      .cta-button:hover {
        background-color: #005a9e;
      }
      .section{
        text-align: center;
      margin: 20px;
      }
      .section h2{
        font-size: xx-large;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 5px 0px 0px 0px;
      }
      .section p{
        margin: 5px auto;
        width: 50%;
        font-size: small;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      }
      .webchat__send-box__main{
        background-color: #ffffff !important;

      }
    </style>
  </head>
  <body>
    <div id="banner">
      <div><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTHarNWZdNivVLkqa9ihJX07IT9F5AMyrp8Hg&s"/></div>
      <nav>
        <!-- <a href="./MuleSoftCopilot.html">Home</a>
        <a href="./MuleSoftCopilot.html">Blog</a>
        <a href="./MuleSoftCopilot.html">About Us</a> -->
      </nav>
      <!-- <button class="cta-button">Quick Demo</button> -->
    </div>
    <div class="section">
      <h2>RC Enterprise AI Ops</h2>
      <!-- <p>CloudSync AI Copilot, is designed to provide a seamless and intelligent user experience and control across Cloud/Hybrid Applications, API's and many more.</p> -->

    </div>
    <div id="webchat" role="main"></div>

    <script crossorigin="anonymous" src="https://cdn.botframework.com/botframework-webchat/latest/webchat.js"></script>
    <script>
      (async function () {
        const styleOptions = {
          hideUploadButton: true
        };

        const tokenEndpointURL = new URL('https://defaultd508624fa0b74fd3951105b18ca027.84.environment.api.powerplatform.com/powervirtualagents/botsbyschema/cra1e_itOpsMonitorCopilot/directline/token?api-version=2022-03-01-preview');
        const locale = document.documentElement.lang || 'en';
        const apiVersion = tokenEndpointURL.searchParams.get('api-version');

        const [directLineURL, token] = await Promise.all([
          fetch(new URL(`/powervirtualagents/regionalchannelsettings?api-version=${apiVersion}`, tokenEndpointURL))
            .then(response => {
              if (!response.ok) {
                throw new Error('Failed to retrieve regional channel settings.');
              }
              return response.json();
            })
            .then(({ channelUrlsById: { directline } }) => directline),
          fetch(tokenEndpointURL)
            .then(response => {
              if (!response.ok) {
                throw new Error('Failed to retrieve Direct Line token.');
              }
              return response.json();
            })
            .then(({ token }) => token)
        ]);

        const directLine = WebChat.createDirectLine({ domain: new URL('v3/directline', directLineURL), token });

        const subscription = directLine.connectionStatus$.subscribe({
          next(value) {
            if (value === 2) {
              directLine
                .postActivity({
                  localTimezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                  locale,
                  name: 'startConversation',
                  type: 'event'
                })
                .subscribe();
              subscription.unsubscribe();
            }
          }
        });

        WebChat.renderWebChat({ directLine, locale, styleOptions }, document.getElementById('webchat'));
      })();
    </script>
  </body>
</html>
